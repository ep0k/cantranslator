

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Flashing a Pre-compiled Binary &mdash; OpenXC CAN Translator 2.1.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenXC CAN Translator 2.1.1 documentation" href="../index.html" />
    <link rel="next" title="Building from Source" href="compiling.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="compiling.html" title="Building from Source"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">OpenXC CAN Translator 2.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="flashing-a-pre-compiled-binary">
<h1>Flashing a Pre-compiled Binary<a class="headerlink" href="#flashing-a-pre-compiled-binary" title="Permalink to this headline">¶</a></h1>
<p>Updates to the CAN translator firmware may be distributed as
pre-compiled binaries, e.g. if they are distributed by an OEM who does
not wish to make the CAN signals public. If that&#8217;s the case for your
vehicle, you will have a <tt class="docutils literal"><span class="pre">.hex</span></tt> file and can use the
<a class="reference external" href="https://github.com/openxc/cantranslator/blob/master/script/upload_hex.sh">upload_hex.sh</a>
script to update your device.</p>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>In order to flash a CAN translator, you need:</p>
<ul class="simple">
<li>AVR programmer</li>
<li>FTDI Driver</li>
<li>Mini-USB cable</li>
</ul>
<div class="section" id="ftdi-driver">
<h3>FTDI Driver<a class="headerlink" href="#ftdi-driver" title="Permalink to this headline">¶</a></h3>
<p>If you are using Windows or OS X, you need to install the FTDI
driver. If you didn&#8217;t need to install MPIDE, you can download the driver
separately from <a class="reference external" href="http://www.ftdichip.com/Drivers/VCP.htm">FTDI</a>.</p>
</div>
<div class="section" id="avr-programmer">
<h3>AVR Programmer<a class="headerlink" href="#avr-programmer" title="Permalink to this headline">¶</a></h3>
<p>In order to program the CAN translator, you need an AVR programmer tool. There
are a number of options that will work.</p>
<p><em>With MPIDE</em></p>
<p>If you have <a class="reference external" href="https://github.com/chipKIT32/chipKIT32-MAX/downloads">MPIDE</a> installed, that already includes a version of avrdude. You
need to set the <tt class="docutils literal"><span class="pre">MPIDE_DIR</span></tt> environment variable in your terminal to point to
the folder where you installed MPIDE. Once set, you should be able to use
<a class="reference external" href="https://github.com/openxc/cantranslator/blob/master/script/upload_hex.sh">upload_hex.sh</a>.</p>
<p><em>Without MPIDE</em></p>
<p>If you do not already have <a class="reference external" href="https://github.com/chipKIT32/chipKIT32-MAX/downloads">MPIDE</a> installed (and that&#8217;s fine, you don&#8217;t really
need it), you can install a programmer seprately:</p>
<ul>
<li><p class="first">Linux - Look for <tt class="docutils literal"><span class="pre">avrdude</span></tt> in your distribution&#8217;s package manager.</p>
</li>
<li><p class="first">OS X - Install <tt class="docutils literal"><span class="pre">avrdude</span></tt> with <a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew</a>.</p>
</li>
<li><dl class="first docutils">
<dt>Windows</dt>
<dd><ul class="first last simple">
<li>If you prefer a GUI, install <a class="reference external" href="http://winavr.sourceforge.net/">WinAVR</a></li>
<li>If you prefer command line, install <a class="reference external" href="http://cygwin.com">Cygwin</a> and
<a class="reference external" href="https://github.com/chipKIT32/chipKIT32-MAX/downloads">MPIDE</a>, and follow the <a class="reference internal" href="installation.html"><em>Installation</em></a> documentation to configure the MPIDE
environment variables.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="usb-cable">
<h3>USB Cable<a class="headerlink" href="#usb-cable" title="Permalink to this headline">¶</a></h3>
<p>You need to have the <strong>mini-USB</strong> port on the chipKIT connected to your computer
to upload a new firmware. This is different than the micro-USB port that you use
to read vehicle data - see the <a class="reference external" href="http://openxcplatform.com/vehicle-interface/index.html#connections">device connections</a> section
of the <a class="reference external" href="http://openxcplatform.com">OpenXC website</a> to make sure you have the correct cable attached.</p>
</div>
</div>
<div class="section" id="flashing">
<h2>Flashing<a class="headerlink" href="#flashing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="command-line">
<h3>Command Line<a class="headerlink" href="#command-line" title="Permalink to this headline">¶</a></h3>
<p>Once you have <tt class="docutils literal"><span class="pre">avrdude</span></tt> installed, run the <tt class="docutils literal"><span class="pre">upload_hex.sh</span></tt> script with the
<tt class="docutils literal"><span class="pre">.hex</span></tt> file you downloaded (Windows users see below, this script will <em>not</em>
work with the standard Windows command line or Powershell):</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>script/upload_hex.sh &lt;the firmware file you downloaded&gt;.hex
</pre></div>
</div>
<p>If you have more than one virtual serial (COM) port active, you may need to
explicitly specific which port to use. Pass the port identified as the second
argument to the script, e.g. in Linux:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>script/upload_hex.sh &lt;the firmware file you downloaded&gt;.hex /dev/ttyUSB2
</pre></div>
</div>
<p>and in Windows, if you needed to use <tt class="docutils literal"><span class="pre">com4</span></tt> instead of the default <tt class="docutils literal"><span class="pre">com3</span></tt>:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>script/upload_hex.sh &lt;the firmware file you downloaded&gt;.hex com4
</pre></div>
</div>
<p><strong>Windows notes:</strong></p>
<p>In Windows, this command will only work in Cygwin, not the standard
<tt class="docutils literal"><span class="pre">cmd.exe</span></tt> or Powershell. If you have the <tt class="docutils literal"><span class="pre">sh.exe</span></tt> program installed by
some other means (e.g. you have Git Shell) then it will
actually work in Powershell, but you need to preface the command with <tt class="docutils literal"><span class="pre">sh</span></tt>
(i.e. <tt class="docutils literal"><span class="pre">sh</span> <span class="pre">script/upload_hex.sh</span> <span class="pre">...</span></tt>).</p>
<p>If you get errors about <tt class="docutils literal"><span class="pre">$'\r':</span> <span class="pre">command</span> <span class="pre">not</span> <span class="pre">found</span></tt> then your Git
configuration added <tt class="docutils literal"><span class="pre">CRLF</span></tt> line endings and so you must run the script
like this:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">set</span> -o igncr <span class="o">&amp;&amp;</span> <span class="nb">export </span>SHELLOPTS <span class="o">&amp;&amp;</span> script/upload_hex.sh &lt;firmware you downloaded&gt;.hex
</pre></div>
</div>
</div>
<div class="section" id="winavr-gui">
<h3>WinAVR GUI<a class="headerlink" href="#winavr-gui" title="Permalink to this headline">¶</a></h3>
<p>The GUI should be straightforward, but additional documentation here would be a
wonderful contribution!</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Flashing a Pre-compiled Binary</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a><ul>
<li><a class="reference internal" href="#ftdi-driver">FTDI Driver</a></li>
<li><a class="reference internal" href="#avr-programmer">AVR Programmer</a></li>
<li><a class="reference internal" href="#usb-cable">USB Cable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flashing">Flashing</a><ul>
<li><a class="reference internal" href="#command-line">Command Line</a></li>
<li><a class="reference internal" href="#winavr-gui">WinAVR GUI</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="compiling.html"
                        title="next chapter">Building from Source</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/installation/binary.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="compiling.html" title="Building from Source"
             >next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             >previous</a> |</li>
        <li><a href="../index.html">OpenXC CAN Translator 2.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Christopher Peplin.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>