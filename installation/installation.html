

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; OpenXC CAN Translator 2.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenXC CAN Translator 2.1 documentation" href="../index.html" />
    <link rel="next" title="Flashing a Pre-compiled Binary" href="binary.html" />
    <link rel="prev" title="USB Device Driver" href="../output/usb.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="binary.html" title="Flashing a Pre-compiled Binary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../output/usb.html" title="USB Device Driver"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">OpenXC CAN Translator 2.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>If you&#8217;ve downloaded a pre-built binary for a specific vehicle, see the
<a class="reference internal" href="binary.html"><em>Flashing a Pre-compiled Binary</em></a> section for instructions on how to flash your CAN
translator. Most users do not need to set up the full development described in
these docs.</p>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>In order to build the CAN translator firmware from source, you need a few
dependencies:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">cantranslator</span></tt> <a class="reference internal" href="#source"><em>source code</em></a> cloned with Git - not from a .zip file</li>
<li><a class="reference internal" href="#mpidedep"><em>MPIDE</em></a></li>
<li>Digilent&#8217;s USB and CAN <a class="reference internal" href="#chipkit-libs"><em>libraries for the chipKIT</em></a></li>
<li><a class="reference internal" href="#ftdi"><em>FTDI driver</em></a></li>
<li>Mini-USB cable</li>
</ul>
<p>If instead of the chipKIT, you are compiling for the Blueboard (based on the
NXP LPC1768/69), instead of MPIDE you will need:</p>
<ul class="simple">
<li><a class="reference internal" href="#gcc-arm"><em>GCC for ARM</em></a> toolchain</li>
<li><a class="reference internal" href="#openocddep"><em>OpenOCD</em></a></li>
<li>JTAG programmer compatible with <tt class="docutils literal"><span class="pre">openocd</span></tt> - we&#8217;ve tested the Olimex
ARM-OCD-USB programmer.</li>
</ul>
<div class="section" id="source-code">
<span id="source"></span><h3>Source Code<a class="headerlink" href="#source-code" title="Permalink to this headline">¶</a></h3>
<p>Clone the repository from GitHub:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>git clone https://github.com/openxc/cantranslator
</pre></div>
</div>
<p>Some of the library dependencies are included in this repository as git
submodules, so before you go further run:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>git submodule update --init
</pre></div>
</div>
<p>If this doesn&#8217;t print out anything or gives you an error, make sure you cloned
this repository from GitHub with git and that you didn&#8217;t download a zip file.
The zip file is missing all of the git metadata, so submodules will not work.</p>
</div>
<div class="section" id="mpide">
<span id="mpidedep"></span><h3>MPIDE<a class="headerlink" href="#mpide" title="Permalink to this headline">¶</a></h3>
<p>Building the source for the CAN translator for the chipKIT microcontroller
requires <a class="reference external" href="https://github.com/chipKIT32/chipKIT32-MAX/downloads">MPIDE</a> (the
development environment and compiler toolchain for chipKIT provided by
Digilent). Installing MPIDE can be a bit quirky on some platforms, so if you&#8217;re
having trouble take a look at the <a class="reference external" href="http://chipkit.org/wiki/index.php?title=MPIDE_Installation">installation guide for MPIDE</a>.</p>
<p>Although we just installed MPIDE, building via the GUI is <strong>not supported</strong>. We
use GNU Make to compile and upload code to the device. You still need to
download and install MPIDE, as it contains the PIC32 compiler.</p>
<p>You need to set an environment variable (e.g. in <tt class="docutils literal"><span class="pre">$HOME/.bashrc</span></tt>) to
let the project know where you installed MPIDE (make sure to change
these defaults if your system is different!):</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="c"># Path to the extracted MPIDE folder (this is correct for OS X)</span>
<span class="nb">export </span><span class="nv">MPIDE_DIR</span><span class="o">=</span>/Applications/Mpide.app/Contents/Resources/Java
</pre></div>
</div>
<p>Remember that if you use <tt class="docutils literal"><span class="pre">export</span></tt>, the environment variables are only
set in the terminal that you run the commands. If you want them active
in all terminals (and you probably do), you need to add these
<tt class="docutils literal"><span class="pre">export</span> <span class="pre">...</span></tt> lines to the file <tt class="docutils literal"><span class="pre">~/.bashrc</span></tt> (in Linux) or
<tt class="docutils literal"><span class="pre">~/.bash_profile</span></tt> (in OS X) and start a new terminal.</p>
</div>
<div class="section" id="digilent-microchip-libraries">
<span id="chipkit-libs"></span><h3>Digilent / Microchip Libraries<a class="headerlink" href="#digilent-microchip-libraries" title="Permalink to this headline">¶</a></h3>
<p>It also requires some libraries from Microchip that we are unfortunately unable
to include or link to as a submodule from the source because of licensing
issues:</p>
<ul class="simple">
<li>Microchip USB device library (download DSD-0000318 from the bottom of
the <a class="reference external" href="http://digilentinc.com/Products/Detail.cfm?NavPath=2,719,943&amp;Prod=CHIPKIT-NETWORK-SHIELD">Network Shield
page</a>)</li>
<li>Microchip CAN library (included in the same DSD-0000318 package as
the USB device library)</li>
</ul>
<p>You can read and accept Microchip&#8217;s license and download both libraries on the
<a class="reference external" href="http://digilentinc.com/Agreement.cfm?DocID=DSD-0000318">Digilent download page</a>.</p>
<p>Once you&#8217;ve downloaded the .zip file, extract it into the <tt class="docutils literal"><span class="pre">libs</span></tt>
directory in this project. It should look like this:</p>
<div class="highlight-sh"><div class="highlight"><pre>- /Users/me/projects/cantranslator/
---- libs/
-------- chipKITUSBDevice/
         chipKitCAN/
        ... other libraries
</pre></div>
</div>
</div>
<div class="section" id="ftdi-driver">
<span id="ftdi"></span><h3>FTDI Driver<a class="headerlink" href="#ftdi-driver" title="Permalink to this headline">¶</a></h3>
<p>If you&#8217;re using Mac OS X or Windows, make sure to install the FTDI driver that
comes with the MPIDE download. The chipKIT uses a different FTDI chip than the
Arduino, so even if you&#8217;ve used the Arduino before, you still need to install
this driver.</p>
</div>
<div class="section" id="openocd">
<span id="openocddep"></span><h3>OpenOCD<a class="headerlink" href="#openocd" title="Permalink to this headline">¶</a></h3>
<div class="section" id="arch-linux">
<h4>Arch Linux<a class="headerlink" href="#arch-linux" title="Permalink to this headline">¶</a></h4>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>pacman -S openocd
</pre></div>
</div>
</div>
<div class="section" id="os-x">
<h4>OS X<a class="headerlink" href="#os-x" title="Permalink to this headline">¶</a></h4>
<p>Install <a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew</a>. Then:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>brew install libftdi libusb
</pre></div>
</div>
<p>Download the OpenOCD source distribution and build manually:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>./configure --enable-ft2232_libftdi
<span class="nv">$ </span>make
<span class="nv">$ </span>sudo make install
</pre></div>
</div>
<p>Edit
<tt class="docutils literal"><span class="pre">/System/Library/Extensions/FTDIUSBSerialDriver.kext/Contents/Info.plist</span></tt>
and remove the Olimex sections, then reload the module:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>sudo kextunload /System/Library/Extensions/FTDIUSBSerialDriver.kext/
<span class="nv">$ </span>sudo kextload /System/Library/Extensions/FTDIUSBSerialDriver.kext/
</pre></div>
</div>
</div>
</div>
<div class="section" id="gcc-for-arm-toolchain">
<span id="gcc-arm"></span><h3>GCC for ARM Toolchain<a class="headerlink" href="#gcc-for-arm-toolchain" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id2">
<h4>Arch Linux<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>Download and install the <tt class="docutils literal"><span class="pre">gcc-arm-none-eabi</span></tt> package from AUR.</p>
</div>
<div class="section" id="id3">
<h4>OS X<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>Install <a class="reference external" href="http://mxcl.github.com/homebrew/">Homebrew</a>. Then:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>brew tap PX4/homebrew-px4
<span class="nv">$ </span>brew install gcc-arm-none-eabi
</pre></div>
</div>
<p>Wait a looooong time.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a><ul>
<li><a class="reference internal" href="#source-code">Source Code</a></li>
<li><a class="reference internal" href="#mpide">MPIDE</a></li>
<li><a class="reference internal" href="#digilent-microchip-libraries">Digilent / Microchip Libraries</a></li>
<li><a class="reference internal" href="#ftdi-driver">FTDI Driver</a></li>
<li><a class="reference internal" href="#openocd">OpenOCD</a><ul>
<li><a class="reference internal" href="#arch-linux">Arch Linux</a></li>
<li><a class="reference internal" href="#os-x">OS X</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gcc-for-arm-toolchain">GCC for ARM Toolchain</a><ul>
<li><a class="reference internal" href="#id2">Arch Linux</a></li>
<li><a class="reference internal" href="#id3">OS X</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../output/usb.html"
                        title="previous chapter">USB Device Driver</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="binary.html"
                        title="next chapter">Flashing a Pre-compiled Binary</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/installation/installation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="binary.html" title="Flashing a Pre-compiled Binary"
             >next</a> |</li>
        <li class="right" >
          <a href="../output/usb.html" title="USB Device Driver"
             >previous</a> |</li>
        <li><a href="../index.html">OpenXC CAN Translator 2.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Christopher Peplin.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>