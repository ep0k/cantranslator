<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>UART Output &mdash; OpenXC CAN Translator 3.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/rtd.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="OpenXC CAN Translator 3.2 documentation" href="../index.html" />
    <link rel="next" title="USB Device Driver" href="usb.html" />
    <link rel="prev" title="JSON Mapping Format" href="../definitions/mappings.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="usb.html" title="USB Device Driver"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../definitions/mappings.html" title="JSON Mapping Format"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">OpenXC CAN Translator 3.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="uart-output">
<h1>UART Output<a class="headerlink" href="#uart-output" title="Permalink to this headline">¶</a></h1>
<p>You can optionally receive the output data over a serial connection in
addition to USB. The data format is the same as USB - a stream of newline
separated JSON objects.</p>
<p>In the same way that you can send OpenXC writes over USB using the OUT
direction of the USB endpoint, you can send identically formatted
messages in the opposite direction on the serial device - from the host
to the CAN translator. They&#8217;ll be processed in exactly the same way.
These write messages are accepted via serial even if USB is connected.</p>
<div class="section" id="digilent-chipkit-max32">
<h2>Digilent chipKIT Max32<a class="headerlink" href="#digilent-chipkit-max32" title="Permalink to this headline">¶</a></h2>
<p>On the chipKIT, <tt class="docutils literal"><span class="pre">UART1A</span></tt> is used for OpenXC output at the 460800 baud rate.
Hardware flow control (RTS/CTS) is enabled, so CTS must be pulled low by the
receiving device before data will be sent.</p>
<p><tt class="docutils literal"><span class="pre">UART1A</span></tt> is also used by the USB-Serial connection, so in order to flash the
PIC32, the Tx/Rx lines must be disconnected. Ideally we could leave that UART
interface for debugging, but there are conflicts with all other exposed UART
interfaces when using flow control.</p>
<ul class="simple">
<li>Pin 0 - <tt class="docutils literal"><span class="pre">U1ARX</span></tt>, connect this to the TX line of the receiver.</li>
<li>Pin 1 - <tt class="docutils literal"><span class="pre">U1ATX</span></tt>, connect this to the RX line of the receiver.</li>
<li>Pin 18 - <tt class="docutils literal"><span class="pre">U1ARTS</span></tt>, connect this to the CTS line of the receiver.</li>
<li>Pin 19 - <tt class="docutils literal"><span class="pre">U1ACTS</span></tt>, connect this to the RTS line of the receiver.</li>
</ul>
<p>An additional item to consider when using UART: typically you will want to rig
the chipKIT to be self-powered (either from an external power source or the
vehicle) if you&#8217;re going to use UART for adding Bluetooth support. There&#8217;s not
much point in being wireless if you still need power from USB.</p>
<p>In that case, move the USB power jumper from the 5v input on the Network Shield
to A0 (analog input 0). Instead of using 5v to power the board, the firmware can
use it to detect if USB is actually attached or not. The benefit of this is that
if you connect USB, then disconnect it, we can detect that in the firmware and
stop wasting time trying to send data over USB. This will dramatically increase
the throughput over UART.</p>
</div>
<div class="section" id="nxp-lpc17xx">
<h2>NXP LPC17xx<a class="headerlink" href="#nxp-lpc17xx" title="Permalink to this headline">¶</a></h2>
<p>On the LPC17xx, <tt class="docutils literal"><span class="pre">UART1</span></tt> is used for OpenXC output at the 230000 baud rate.
Like on the chipKIT, hardware flow control (RTS/CTS) is enabled, so CTS must be
pulled low by the receiving device before data will be sent.</p>
<ul class="simple">
<li>Pin 2.0 - <tt class="docutils literal"><span class="pre">UART1</span> <span class="pre">TX</span></tt>, connect this to the RX line of the receiver.</li>
<li>Pin 2.1 - <tt class="docutils literal"><span class="pre">UART1</span> <span class="pre">RX</span></tt>, connect this to the TX line of the receiver.</li>
<li>Pin 2.2 - <tt class="docutils literal"><span class="pre">UART1</span> <span class="pre">CTS</span></tt>, connect this to the RTS line of the receiver.</li>
<li>Pin 2.7 - <tt class="docutils literal"><span class="pre">UART1</span> <span class="pre">RTS</span></tt>, connect this to the CTS line of the receiver.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">UART Output</a><ul>
<li><a class="reference internal" href="#digilent-chipkit-max32">Digilent chipKIT Max32</a></li>
<li><a class="reference internal" href="#nxp-lpc17xx">NXP LPC17xx</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../definitions/mappings.html"
                        title="previous chapter">JSON Mapping Format</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="usb.html"
                        title="next chapter">USB Device Driver</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/output/uart.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="usb.html" title="USB Device Driver"
             >next</a> |</li>
        <li class="right" >
          <a href="../definitions/mappings.html" title="JSON Mapping Format"
             >previous</a> |</li>
        <li><a href="../index.html">OpenXC CAN Translator 3.2 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Christopher Peplin.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>